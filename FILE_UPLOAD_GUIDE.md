# 파일명 형식에 맞춘 업로드 가이드

## 📁 **업로드할 파일 목록**

### **2025-08 폴더에 업로드할 파일들**
1. `20250818-도림사거리정거장 시공 관리도.pdf`
2. `20250818-신풍정거장 시공 관리도.pdf`
3. `20250818-신풍 환승통로 터널 시공관리도.pdf`
4. `20250818-신풍 환승통로 개착 구조물 시공관리도.pdf`
5. `20250818-본선 1구간 시공관리도.pdf`
6. `20250818-본선 2구간 시공관리도.pdf`

### **2025-01 폴더에 업로드할 파일들 (선택사항)**
1. `20250115-도림사거리정거장 시공 관리도.pdf`
2. `20250115-신풍정거장 시공 관리도.pdf`
3. `20250115-본선 1구간 시공관리도.pdf`

## 🚀 **업로드 단계**

### **1단계: 폴더 생성**
1. `management-drawings` 버킷에서 **New Folder** 클릭
2. 폴더명: `2025-08` (이미 있음)
3. 추가로 `2025-01` 폴더도 생성

### **2단계: 파일 업로드**
1. `2025-08` 폴더 클릭
2. **Upload files** 버튼 클릭 또는 파일 드래그 앤 드롭
3. 위의 6개 파일을 한 번에 선택하여 업로드

### **3단계: Storage Policy 설정**
**Storage** → **Policies**에서 실행:
```sql
CREATE POLICY "Public read access" ON storage.objects
FOR SELECT USING (bucket_id = 'management-drawings');
```

### **4단계: 데이터베이스 설정**
**SQL Editor**에서 `UPDATED_FILE_DATA.sql` 실행

## 📋 **파일명 규칙**

### **기본 형식**
```
[날짜]-[공정명] [도면종류].pdf
```

### **예시**
- `20250818-도림사거리정거장 시공 관리도.pdf`
- `20250818-신풍정거장 시공 관리도.pdf`
- `20250818-신풍 환승통로 터널 시공관리도.pdf`

### **공정명 매핑**
- `도림사거리정거장` → `도림사거리 정거장`
- `신풍정거장` → `신풍 정거장`
- `신풍 환승통로 터널` → `신풍 환승통로` (drawing_type: `터널`)
- `신풍 환승통로 개착 구조물` → `신풍 환승통로` (drawing_type: `개착구조물`)
- `본선 1구간` → `본선 1구간`
- `본선 2구간` → `본선 2구간`

## 🔍 **업로드 확인**

### **파일 경로 확인**
업로드 후 파일 경로가 다음과 같은지 확인:
- `management-drawings/2025-08/20250818-도림사거리정거장 시공 관리도.pdf`
- `management-drawings/2025-08/20250818-신풍정거장 시공 관리도.pdf`
- 등등...

### **파일 접근 테스트**
브라우저에서 파일 URL 접속하여 PDF 확인:
```
https://[PROJECT_ID].supabase.co/storage/v1/object/public/management-drawings/2025-08/20250818-도림사거리정거장%20시공%20관리도.pdf
```

## 🎯 **애플리케이션 테스트**

업로드 완료 후 다음 질문으로 테스트:
- "도림사거리 정거장 공정 분석해줘"
- "신풍 정거장 시공관리도 보여줘"
- "본선 1구간 공정 분석해줘"

## ⚠️ **주의사항**

1. **파일명 공백**: 파일명에 공백이 있어도 URL 인코딩으로 처리됨
2. **파일 크기**: 50MB 이하로 제한
3. **파일 형식**: PDF 파일만 지원
4. **권한 설정**: Storage Policy 반드시 설정 필요

